<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cuadrícula 2×2 de vistas web</title>
    <style>
      :root {
        --bg: #0f172a;
        --panel: #111827;
        --text: #e5e7eb;
        --accent: #22d3ee;
        --radius: 10px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Ubuntu, Cantarell, Noto Sans;
        background: #0b1020;
        color: var(--text);
        min-height: 100vh;
        display: grid;
        grid-template-rows: 1fr;
        padding: 4px;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        grid-auto-rows: minmax(320px, 48vh);
        gap: 4px;
        min-height: 0;
      }
      .cell {
        border: 1px solid rgba(255, 255, 255, 0.05);
        background: var(--panel);
        border-radius: var(--radius);
        overflow: hidden;
        display: grid;
        grid-template-rows: auto 1fr;
        min-height: 0;
      }
      .controls {
        display: grid;
        grid-template-columns: 1fr auto auto auto auto;
        gap: 3px;
        padding: 3px;
        align-items: center;
        background: rgba(0, 0, 0, 0.15);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }
      .controls input[type="url"] {
        width: 100%;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: var(--text);
        padding: 3px 5px;
        border-radius: 5px;
        outline: none;
        font-size: 11px;
      }
      .btn {
        appearance: none;
        border: 0;
        padding: 3px 5px;
        border-radius: 5px;
        font-weight: 600;
        font-size: 11px;
        color: #0a0f1d;
        cursor: pointer;
        box-shadow: none;
      }
      .btn.load {
        background: linear-gradient(135deg, var(--accent), #60a5fa);
      }
      .btn.refresh {
        background: linear-gradient(135deg, #facc15, #fb7185);
      }
      .btn.zoom {
        background: linear-gradient(135deg, #34d399, #10b981);
      }
      .frame-wrap {
        position: relative;
        min-height: 0;
        overflow: auto;
      }
      .frame {
        width: 100%;
        height: 100%;
        border: 0;
        background: #0b1325;
        display: block;
        transform-origin: 0 0;
      }
      .overlay {
        position: absolute;
        inset: 0;
        display: none;
        place-items: center;
        background: rgba(0, 0, 0, 0.3);
      }
      .overlay.show {
        display: grid;
      }
      .spinner {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.25);
        border-top-color: white;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <main class="grid" id="grid"></main>
    <template id="panel-template">
      <section class="cell" data-panel>
        <div class="controls">
          <input
            type="url"
            inputmode="url"
            placeholder="http://ejemplo.com"
            aria-label="URL a cargar"
          />
          <button class="btn load" type="button">Go</button>
          <button class="btn refresh" type="button">↻</button>
          <button class="btn zoom zoom-out" type="button">−</button>
          <button class="btn zoom zoom-in" type="button">+</button>
        </div>
        <div class="frame-wrap">
          <iframe class="frame"></iframe>
          <div class="overlay" aria-hidden="true">
            <div class="spinner"></div>
          </div>
        </div>
      </section>
    </template>
    <script>
      const PANELS = 4;
      const normalizeUrl = (raw) => {
        if (!raw) return "";
        const trimmed = raw.trim();
        if (/^http?:\/\//i.test(trimmed)) return trimmed;
        return "http://" + trimmed.replace(/^\/+/, "");
      };
      function createPanel(index) {
        const tpl = document.getElementById("panel-template");
        const node = tpl.content.firstElementChild.cloneNode(true);
        const input = node.querySelector('input[type="url"]');
        const btnLoad = node.querySelector(".btn.load");
        const btnRefresh = node.querySelector(".btn.refresh");
        const btnZoomIn = node.querySelector(".zoom-in");
        const btnZoomOut = node.querySelector(".zoom-out");
        const iframe = node.querySelector("iframe");
        const overlay = node.querySelector(".overlay");
        let zoom = 1;
        const showLoading = (on) => overlay.classList.toggle("show", !!on);
        const applyZoom = () => {
          iframe.style.transform = `scale(${zoom})`;
          iframe.style.width = `${100 / zoom}%`;
          iframe.style.height = `${100 / zoom}%`;
        };
        const setZoom = (v) => {
          zoom = Math.min(2, Math.max(0.5, v));
          applyZoom();
        };
        const load = (raw) => {
          const url = normalizeUrl(raw ?? input.value);
          if (!url) return;
          input.value = url;
          showLoading(true);
          iframe.src = url;
        };
        const refresh = () => {
          if (iframe.src) {
            showLoading(true);
            iframe.src = iframe.src;
          }
        };
        btnLoad.addEventListener("click", () => load());
        btnRefresh.addEventListener("click", refresh);
        btnZoomIn.addEventListener("click", () => setZoom(zoom + 0.1));
        btnZoomOut.addEventListener("click", () => setZoom(zoom - 0.1));
        input.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            e.preventDefault();
            load();
          }
        });
        iframe.addEventListener("load", () => {
          showLoading(false);
          applyZoom();
        });
        iframe.addEventListener("error", () => {
          showLoading(false);
        });
        setZoom(1);
        return node;
      }
      const grid = document.getElementById("grid");
      for (let i = 1; i <= PANELS; i++) {
        grid.appendChild(createPanel(i));
      }
    </script>
  </body>
</html>
